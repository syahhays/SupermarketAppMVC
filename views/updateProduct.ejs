<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Product â€” Groceria</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <%- include('partials/navbar') %>

  <div class="container mt-4">
    <h2 class="mb-4">Edit Product</h2>

    <form action="/updateProduct/<%= product.id %>" method="POST" enctype="multipart/form-data" style="max-width:600px;">

      <div class="mb-3">
        <label class="form-label">Product Name</label>
        <input name="name" class="form-control" required value="<%= product.productName %>">
      </div>

      <div class="mb-3">
        <label class="form-label">Quantity</label>
        <input name="quantity" type="number" min="0" class="form-control" required value="<%= product.quantity %>">
      </div>

      <div class="mb-3">
        <label class="form-label">Price ($)</label>
        <input name="price" type="number" step="0.01" min="0" class="form-control" required value="<%= product.price %>">
      </div>

      <!-- CATEGORY DROPDOWN -->
      <div class="mb-3">
        <label class="form-label">Category</label>
        <select name="category" class="form-select" required>
          <option value="fresh-produce" <%= product.category === 'fresh-produce' ? 'selected' : '' %>>Fresh Produce</option>
          <option value="meat-poultry" <%= product.category === 'meat-poultry' ? 'selected' : '' %>>Meat & Poultry</option>
          <option value="seafood" <%= product.category === 'seafood' ? 'selected' : '' %>>Seafood</option>
          <option value="dairy-eggs" <%= product.category === 'dairy-eggs' ? 'selected' : '' %>>Dairy & Eggs</option>
          <option value="frozen" <%= product.category === 'frozen' ? 'selected' : '' %>>Frozen</option>
          <option value="beverages" <%= product.category === 'beverages' ? 'selected' : '' %>>Beverages</option>
          <option value="snacks" <%= product.category === 'snacks' ? 'selected' : '' %>>Snacks</option>
          <option value="household" <%= product.category === 'household' ? 'selected' : '' %>>Household</option>
          <option value="bakery" <%= product.category === 'bakery' ? 'selected' : '' %>>Bakery</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Current Image</label><br>

        <% if (product.image) { %>
          <img src="/images/<%= product.image %>" style="height:60px;margin-bottom:8px;">
        <% } else { %>
          <p class="text-muted">No image</p>
        <% } %>

        <input type="hidden" name="existingImage" value="<%= product.image %>">

        <label class="form-label mt-2">Replace Image</label>
        <input name="image" type="file" accept="image/*" class="form-control">
      </div>

      <button class="btn btn-primary">Save Changes</button>
      <a href="/inventory" class="btn btn-secondary ms-2">Cancel</a>

    </form>
  </div>

</body>
</html>