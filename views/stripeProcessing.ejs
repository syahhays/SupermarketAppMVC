<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= title %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    const sessionId = "<%= sessionId || '' %>";
    const poll = async () => {
      if (!sessionId) return;
      try {
        const res = await fetch(`/stripe/status?session_id=${encodeURIComponent(sessionId)}`);
        const data = await res.json();
        if (data.ok && data.paid && data.orderId) {
          window.location.href = `/orders/${data.orderId}`;
          return;
        }
      } catch (e) {}
      setTimeout(poll, 1500);
    };
    poll();
  </script>
</head>
<body>
  <%- include('partials/navbar') %>
  <div class="container my-5">
    <div class="card p-4">
      <h5 class="mb-2">Payment processing</h5>
      <p class="text-muted mb-0">We are confirming your Stripe payment. You will be redirected shortly.</p>
    </div>
  </div>
  <%- include('partials/footer') %>
</body>
</html>
